FUNCTION SelectSources(Q, K, S, U)
  INPUT:
    quad pattern query Q
    access keys K
    summaries S for each quad component
      (S_subject, S_predicate, S_object, S_graph)
    list of sources U
  OUTPUT:
    list of selected sources
FOREACH C in (subject, predicate, object, graph)
  v = Q[C]
  IF v not variable
    FOREACH k in K
      IF ! Summary_Contains(S_C, v, k, 0)
        RETURN []
      FOREACH u in U
        IF ! Summary_Contains(S_C, v, k, u)
          remove u from U
RETURN U
